var box=document.getElementById("space"),logo=document.getElementById("logos");var east=document.getElementById("east"),west=document.getElementById("west"),south=document.getElementById("south"),north=document.getElementById("north");var e_img_1=east.getElementsByTagName('div')[0].getElementsByTagName('img')[0],w_img_1=west.getElementsByTagName('div')[0].getElementsByTagName('img')[0],s_img_1=south.getElementsByTagName('div')[0].getElementsByTagName('img')[0],n_img_1=north.getElementsByTagName('div')[0].getElementsByTagName('img')[0],e_img_2=east.getElementsByTagName('div')[1].getElementsByTagName('img')[0],w_img_2=west.getElementsByTagName('div')[1].getElementsByTagName('img')[0],s_img_2=south.getElementsByTagName('div')[1].getElementsByTagName('img')[0],n_img_2=north.getElementsByTagName('div')[1].getElementsByTagName('img')[0];var rx=0,ry=950,cx,cy;var isLeftDown=false,isRightDown=false,isClicks=false;var clicksObj,tm1,tm_load;window.onload=function(){var str=window.navigator.appVersion;var reg=/Chrome/gi;if(!(reg.test(str))){alert("请使用 Chrome 浏览器打开！！");return}loads();document.oncontextmenu=function(eve){clearAutoEve(eve)};document.onselectstart=function(eve){clearAutoEve(eve)};var imgAll=document.getElementsByTagName('img');for(var i=0;i<imgAll.length;i+=1){imgAll[i].onmousedown=function(eve){clearAutoEve(eve)}}clearImgClass();drawImg()};function loads(){clearInterval(tm_load);tm_load=setInterval(function(){rx+=1;if(rx>=360){rx=0;box.style.transform="rotateY("+rx+"deg)";clearInterval(tm_load)}else{box.style.transform="rotateY("+rx+"deg)"}},7)}function clearAutoEve(eve){var e=eve||window.event;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}document.onmousedown=function(eve){var e=eve||window.event;if(e.button==0||window.event.button==1){isLeftDown=true}if(e.button==2||window.event.button==3){isRightDown=true}};document.onmouseup=function(eve){var e=eve||window.event;if(e.button==0||window.event.button==1){isLeftDown=false}if(e.button==2||window.event.button==3){isRightDown=false}};document.onmousemove=function(eve){var e=eve||window.event;if(isLeftDown){clearInterval(tm_load);clearInterval(tm1);clearImgClass();rx-=(e.clientX-cx)/5;if(rx>=360){rx=rx-360}if(rx<0){rx=359}cx=e.clientX;box.style.transform="rotateY("+rx+"deg)"}else if(isRightDown){clearInterval(tm_load);clearInterval(tm1);clearImgClass();ry+=(e.clientY-cy)*5;if(ry>=1900){ry=1900}if(ry<=400){ry=400}cy=e.clientY;document.body.style.webkitPerspective=ry}else{cx=e.clientX;cy=e.clientY;ry=950;document.body.style.webkitPerspective=ry}};function boxShadow(){if((rx>=0&&rx<45)||(rx>=315&&rx<360)){east.getElementsByTagName('span')[0].className="wall_shadow";west.getElementsByTagName('span')[0].className="wall_shadow";south.getElementsByTagName('span')[0].className="";north.getElementsByTagName('span')[0].className="wall_shadow"}else if(rx>=45&&rx<135){east.getElementsByTagName('span')[0].className="";west.getElementsByTagName('span')[0].className="wall_shadow";south.getElementsByTagName('span')[0].className="wall_shadow";north.getElementsByTagName('span')[0].className="wall_shadow"}else if(rx>=135&&rx<225){east.getElementsByTagName('span')[0].className="wall_shadow";west.getElementsByTagName('span')[0].className="wall_shadow";south.getElementsByTagName('span')[0].className="wall_shadow";north.getElementsByTagName('span')[0].className=""}else if(rx>=225&&rx<315){east.getElementsByTagName('span')[0].className="wall_shadow";west.getElementsByTagName('span')[0].className="";south.getElementsByTagName('span')[0].className="wall_shadow";north.getElementsByTagName('span')[0].className="wall_shadow"}}function drawImg(){var finds=[];finds=getNums(herosImg.length,8);e_img_1.style.opacity="0";w_img_1.style.opacity="0";s_img_1.style.opacity="0";n_img_1.style.opacity="0";e_img_2.style.opacity="0";w_img_2.style.opacity="0";s_img_2.style.opacity="0";n_img_2.style.opacity="0";setTimeout(function(){e_img_1.src=herosImg[finds[0]].imgs;e_img_1.parentNode.getElementsByTagName('span')[0].innerHTML=herosImg[finds[0]].name;e_img_1.style.opacity="1";w_img_1.src=herosImg[finds[1]].imgs;w_img_1.parentNode.getElementsByTagName('span')[0].innerHTML=herosImg[finds[1]].name;w_img_1.style.opacity="1";s_img_1.src=herosImg[finds[2]].imgs;s_img_1.parentNode.getElementsByTagName('span')[0].innerHTML=herosImg[finds[2]].name;s_img_1.style.opacity="1";n_img_1.src=herosImg[finds[3]].imgs;n_img_1.parentNode.getElementsByTagName('span')[0].innerHTML=herosImg[finds[3]].name;n_img_1.style.opacity="1";e_img_2.src=herosImg[finds[4]].imgs;e_img_2.parentNode.getElementsByTagName('span')[0].innerHTML=herosImg[finds[4]].name;e_img_2.style.opacity="1";w_img_2.src=herosImg[finds[5]].imgs;w_img_2.parentNode.getElementsByTagName('span')[0].innerHTML=herosImg[finds[5]].name;w_img_2.style.opacity="1";s_img_2.src=herosImg[finds[6]].imgs;s_img_2.parentNode.getElementsByTagName('span')[0].innerHTML=herosImg[finds[6]].name;s_img_2.style.opacity="1";n_img_2.src=herosImg[finds[7]].imgs;n_img_2.parentNode.getElementsByTagName('span')[0].innerHTML=herosImg[finds[7]].name;n_img_2.style.opacity="1"},400);setTimeout(drawImg,10000)}function getNums(max,n){var nums1=[],nums2=[];for(var i=0;i<max;i+=1){nums2.push(i)}for(var i=0;i<n;i+=1){var x=Math.floor(Math.random()*nums2.length);nums1.push(nums2[x]);nums2.splice(x,1)}return nums1}function clicksImg(obj){var reg=/\bclicks\b/g;if(reg.test(obj.className)){clearImgClass();return}var walls=obj.parentNode;turns(walls.id);clearImgClass();if(obj.className==""){obj.className="clicks"}else{obj.className="firsts clicks"}obj.getElementsByTagName("span")[0].style.opacity="1"}function clearImgClass(){e_img_1.parentNode.className="firsts";w_img_1.parentNode.className="firsts";s_img_1.parentNode.className="firsts";n_img_1.parentNode.className="firsts";e_img_2.parentNode.className="";w_img_2.parentNode.className="";s_img_2.parentNode.className="";n_img_2.parentNode.className="";e_img_1.parentNode.getElementsByTagName("span")[0].style.opacity="0";w_img_1.parentNode.getElementsByTagName("span")[0].style.opacity="0";s_img_1.parentNode.getElementsByTagName("span")[0].style.opacity="0";n_img_1.parentNode.getElementsByTagName("span")[0].style.opacity="0";e_img_2.parentNode.getElementsByTagName("span")[0].style.opacity="0";w_img_2.parentNode.getElementsByTagName("span")[0].style.opacity="0";s_img_2.parentNode.getElementsByTagName("span")[0].style.opacity="0";n_img_2.parentNode.getElementsByTagName("span")[0].style.opacity="0"}function turns(id){var times;switch(id){case 'south':if(rx<180){times=Math.round(500/(rx));clearInterval(tm1);tm1=setInterval(function(){if(rx<=0){rx=0;box.style.transform="rotateY("+rx+"deg)";clearInterval(tm1)}else{rx-=1;box.style.transform="rotateY("+rx+"deg)"}},times)}else{times=Math.round(500/(360-rx));clearInterval(tm1);tm1=setInterval(function(){if(rx>359){rx=0;box.style.transform="rotateY("+rx+"deg)";clearInterval(tm1)}else{rx+=1;box.style.transform="rotateY("+rx+"deg)"}},times)}break;case 'east':if(rx<90||rx>270){if(rx<90){times=Math.round(500/(90-rx))}else{times=Math.round(500/(450-rx))}clearInterval(tm1);tm1=setInterval(function(){if((rx>=90&&rx<180)||(rx>=450&&rx<540)){rx=90;box.style.transform="rotateY("+rx+"deg)";clearInterval(tm1)}else{rx+=1;box.style.transform="rotateY("+rx+"deg)"}},times)}else{times=Math.round(500/(rx-90));clearInterval(tm1);tm1=setInterval(function(){if(rx<=90){rx=90;box.style.transform="rotateY("+rx+"deg)";clearInterval(tm1)}else{rx-=1;box.style.transform="rotateY("+rx+"deg)"}},times)}break;case 'north':if(rx<180){times=Math.round(500/(180-rx));clearInterval(tm1);tm1=setInterval(function(){if(rx>=180){rx=180;box.style.transform="rotateY("+rx+"deg)";clearInterval(tm1)}else{rx+=1;box.style.transform="rotateY("+rx+"deg)"}},times)}else{times=Math.round(500/(rx-180));clearInterval(tm1);tm1=setInterval(function(){if(rx<=180){rx=180;box.style.transform="rotateY("+rx+"deg)";clearInterval(tm1)}else{rx-=1;box.style.transform="rotateY("+rx+"deg)"}},times)}break;case 'west':if(rx>90&&rx<270){times=Math.round(500/(270-rx));clearInterval(tm1);tm1=setInterval(function(){if(rx>=270){rx=270;box.style.transform="rotateY("+rx+"deg)";clearInterval(tm1)}else{rx+=1;box.style.transform="rotateY("+rx+"deg)"}},times)}else{if(rx<90){times=Math.round(500/(90+rx))}else{times=Math.round(500/(rx-270))}clearInterval(tm1);tm1=setInterval(function(){if((rx<=270&&rx>180)||(rx<=-90&&rx>-180)){rx=270;box.style.transform="rotateY("+rx+"deg)";clearInterval(tm1)}else{rx-=1;box.style.transform="rotateY("+rx+"deg)"}},times)}break;default:break}}